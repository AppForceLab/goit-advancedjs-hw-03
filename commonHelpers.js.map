{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] =\n  'live_ZYoofX8lPZPksK64naQNqNt6Z7k97j9su2yVEy5XBJSvDx99KWxen8fXWLm5gIKg';\n\nconst BASE_URL = 'https://api.thecatapi.com';\nconst END_POINT_BREEDS = 'v1/breeds';\nconst END_POINT_SEARCH = 'v1/images/search';\n\nfunction errorScan(resp) {\n  if (resp.status != 200) {\n    throw Error(resp.statusText || 'Anknown error');\n  }\n}\n\nasync function fetchBreeds() {\n  const resp = await axios.get(`${BASE_URL}/${END_POINT_BREEDS}`);\n  errorScan(resp);\n  return resp.data;\n}\n\nasync function fetchCatByBreed(breed_ids) {\n  const resp = await axios.get(\n    `${BASE_URL}/${END_POINT_SEARCH}?breed_ids=${breed_ids}`\n  );\n  errorScan(resp);\n  return resp.data[0];\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import SlimSelect from 'slim-select';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet breadData = [];\nconst catInfoPlaceholder = document.querySelector('.cat-info');\nconst selectWrap = document.querySelector('.selet-wrap');\nconst loaderInfo = document.querySelector('.loader-info');\n\nconst breedSelect = new SlimSelect({\n  select: '.breed-select',\n  settings: {\n    showSearch: false,\n    placeholderText: 'Choose the breed',\n  },\n  events: { afterChange: onSelect },\n});\n\nfunction buildSelect() {\n  setVisibility(loaderInfo, true);\n  setVisibility(selectWrap, false);\n  fetchBreeds()\n    .then(data => {\n      data.forEach(({ name, id }) => {\n        breadData.push({\n          text: name,\n          value: id,\n        });\n      });\n      console.log(breadData);\n      breedSelect.setData(breadData);\n      setVisibility(selectWrap, true);\n    })\n    .catch(err => {\n      iziToast.error({\n        title: err.message,\n        message: 'Try againe later',\n      });\n    })\n    .finally(() => setVisibility(loaderInfo, false));\n}\n\nbuildSelect();\n\nfunction onSelect(values) {\n  catInfoPlaceholder.innerHTML = '';\n  setVisibility(loaderInfo, true);\n\n  fetchCatByBreed(values[0].value)\n    .then(data => {\n      let url = data['url'];\n      let catInfo = data.breeds[0];\n      let imgContent = `<img class=\"cat-img\" src=\"https://thumbs.dreamstime.com/b/placeholder-banner-cat-isolated-white-41538574.jpg\" alt=\"No img\" />`;\n      let textContent = ``;\n\n      if (url) {\n        imgContent = ` <img class=\"cat-img\" src=\"${url}\" alt=\"cat image\"/>`;\n      }\n\n      if (catInfo) {\n        textContent = `\n         <div class=\"info-box\">\n             <h1 class=\"info-box__header\">${catInfo.name}</h1>\n             <p class=\"info-box__descr\">${catInfo.description}</p>\n             <p><span class=\"info-box_span\">Temperament:</span> ${catInfo.temperament}</p>\n         </div>`;\n      }\n      catInfoPlaceholder.innerHTML = imgContent + textContent;\n    })\n    .catch(err => {\n      iziToast.error({\n        title: err.message,\n        message: 'Try againe later',\n      });\n    })\n    .finally(() => setVisibility(loaderInfo, false));\n}\n\nfunction setVisibility(el, isVisible) {\n  if (isVisible) {\n    el.classList.remove('visually-hidden');\n  } else {\n    el.classList.add('visually-hidden');\n  }\n}\n"],"names":["axios","BASE_URL","END_POINT_BREEDS","END_POINT_SEARCH","errorScan","resp","fetchBreeds","fetchCatByBreed","breed_ids","breadData","catInfoPlaceholder","selectWrap","loaderInfo","breedSelect","SlimSelect","onSelect","buildSelect","setVisibility","data","name","id","err","iziToast","values","url","catInfo","imgContent","textContent","el","isVisible"],"mappings":"owBACAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAW,4BACXC,EAAmB,YACnBC,EAAmB,mBAEzB,SAASC,EAAUC,EAAM,CACvB,GAAIA,EAAK,QAAU,IACjB,MAAM,MAAMA,EAAK,YAAc,eAAe,CAElD,CAEA,eAAeC,GAAc,CAC3B,MAAMD,EAAO,MAAML,EAAM,IAAI,GAAGC,KAAYC,GAAkB,EAC9D,OAAAE,EAAUC,CAAI,EACPA,EAAK,IACd,CAEA,eAAeE,EAAgBC,EAAW,CACxC,MAAMH,EAAO,MAAML,EAAM,IACvB,GAAGC,KAAYE,eAA8BK,GACjD,EACE,OAAAJ,EAAUC,CAAI,EACPA,EAAK,KAAK,EACnB,CCrBA,IAAII,EAAY,CAAA,EAChB,MAAMC,EAAqB,SAAS,cAAc,WAAW,EACvDC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAc,IAAIC,EAAW,CACjC,OAAQ,gBACR,SAAU,CACR,WAAY,GACZ,gBAAiB,kBAClB,EACD,OAAQ,CAAE,YAAaC,CAAU,CACnC,CAAC,EAED,SAASC,GAAc,CACrBC,EAAcL,EAAY,EAAI,EAC9BK,EAAcN,EAAY,EAAK,EAC/BL,EAAa,EACV,KAAKY,GAAQ,CACZA,EAAK,QAAQ,CAAC,CAAE,KAAAC,EAAM,GAAAC,CAAE,IAAO,CAC7BX,EAAU,KAAK,CACb,KAAMU,EACN,MAAOC,CACjB,CAAS,CACT,CAAO,EACD,QAAQ,IAAIX,CAAS,EACrBI,EAAY,QAAQJ,CAAS,EAC7BQ,EAAcN,EAAY,EAAI,CACpC,CAAK,EACA,MAAMU,GAAO,CACZC,EAAS,MAAM,CACb,MAAOD,EAAI,QACX,QAAS,kBACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAMJ,EAAcL,EAAY,EAAK,CAAC,CACnD,CAEAI,IAEA,SAASD,EAASQ,EAAQ,CACxBb,EAAmB,UAAY,GAC/BO,EAAcL,EAAY,EAAI,EAE9BL,EAAgBgB,EAAO,GAAG,KAAK,EAC5B,KAAKL,GAAQ,CACZ,IAAIM,EAAMN,EAAK,IACXO,EAAUP,EAAK,OAAO,GACtBQ,EAAa,gIACbC,EAAc,GAEdH,IACFE,EAAa,8BAA8BF,wBAGzCC,IACFE,EAAc;AAAA;AAAA,4CAEsBF,EAAQ;AAAA,0CACVA,EAAQ;AAAA,kEACgBA,EAAQ;AAAA,kBAGpEf,EAAmB,UAAYgB,EAAaC,CAClD,CAAK,EACA,MAAMN,GAAO,CACZC,EAAS,MAAM,CACb,MAAOD,EAAI,QACX,QAAS,kBACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAMJ,EAAcL,EAAY,EAAK,CAAC,CACnD,CAEA,SAASK,EAAcW,EAAIC,EAAW,CAChCA,EACFD,EAAG,UAAU,OAAO,iBAAiB,EAErCA,EAAG,UAAU,IAAI,iBAAiB,CAEtC"}